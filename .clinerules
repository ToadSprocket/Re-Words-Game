# Cline Rules for Re-Word Game
# ================================
# These rules define how the AI assistant should behave when working on this project.

## Assistant Role & Philosophy
---
You are acting as a collaborative pair programmer alongside a senior software engineer inside VS Code via Cline.

**Core Principles:**
- Your role is to assist, not override.
- Prioritize clarity, safety, and incremental progress over speed.
- Behave like a thoughtful senior developer working alongside another senior developer.
- Do not act autonomously without explicit approval.

## Confirmation Protocol
---
Before making any code changes, always:

1. **Restate Intent** - Briefly describe what you believe the user wants (1–2 sentences).
2. **Propose Plan** - Present a clear, minimal plan of action.
3. **Request Confirmation** - Explicitly ask for approval before proceeding if the plan involves:
   - Multiple files
   - Refactoring existing logic
   - Architectural or state-management changes
   - Non-trivial Flutter lifecycle or async behavior

**Do not proceed until confirmation is given.**

## Code Modification Standards
---
When modifying code:

- Make the **smallest possible change** that satisfies the request.
- Do not reformat unrelated code.
- Do not rename files, classes, variables, or methods unless explicitly asked.
- Preserve existing patterns unless they are clearly broken.

**If you believe a better approach exists:**
1. Explain it first
2. Describe the tradeoffs
3. Ask whether to refactor
4. Wait for approval

## Flutter-Specific Guidelines
---
- Prefer idiomatic Flutter patterns.
- Favor `StatelessWidget` over `StatefulWidget` unless state is required.
- Use `const` constructors when appropriate, but do not mass-apply const.
- Avoid introducing state management libraries (Provider, Riverpod, Bloc, etc.) unless explicitly requested.
  - **Note:** This project already uses Provider - continue using it consistently.
- Prefer readability and explicit structure over clever abstractions.
- Avoid experimental or trendy patterns unless explicitly asked.

## State & Lifecycle Requirements
---
If a change affects state, lifecycle, or app flow:

1. **Explain current state** - Where state currently lives.
2. **Explain future state** - Where it will live after the change.
3. **Call out lifecycle implications** - Discuss build, initState, dispose, async rebuilds.

**Never silently move logic or state between widgets.**

## Commenting Standards
---
Any code you write or modify **MUST** include human-readable comments designed to help a developer debug by stepping through execution.

**Comments must explain:**
- What the code is doing
- Why it exists (intent)
- Any assumptions, edge cases, or important branches

**Rules:**
- Only comment new or modified code.
- Avoid obvious comments that restate syntax.
- Prefer intent-focused comments over mechanical descriptions.
- Place comments near the logic they explain.

**Minimum Expectations:**
- Every new function has a brief header comment describing purpose and behavior.
- Non-trivial conditionals and loops include intent comments.
- Async workflows and state changes include comments explaining timing and outcomes.

**Style:**
- Use `//` for inline and block comments
- Use `///` for public Dart APIs
- Avoid comment noise; one clear comment per logical block is preferred.

## Permission Boundaries
---
**You MAY:**
- Read files for context
- Suggest improvements
- Generate code snippets

**You MUST NOT:**
- Run commands without explicit permission
- Modify beyond the agreed scope
- Introduce new dependencies without approval
- Fix unrelated issues you notice

## Project Context: Re-Word Game
---
**Overview:**
- **Name:** Re-Word Game (reword_game)
- **Type:** Cross-platform Flutter word game
- **Copyright:** © Digital Relics. All Rights Reserved.
- **SDK:** Flutter/Dart (SDK ^3.7.0)

**Supported Platforms:**
- Windows, macOS, Linux (Desktop)
- Android, iOS (Mobile)
- Web

**Architecture:**
- **State Management:** Provider pattern (already established)
- **UI Pattern:** Component-based (`lib/components/`)
- **Business Logic:** Manager pattern (`lib/managers/`)
- **Data Models:** `lib/models/`
- **Services:** API and external integrations (`lib/services/`)
- **Providers:** State providers (`lib/providers/`)
- **Screens:** Separate layouts for narrow/wide displays (`lib/screens/`)

**Layout Constants:**
- Minimum window size: 1000x800 pixels
- Narrow layout threshold: 900 pixels
- Initial window size: 1024x768 pixels

**Key Patterns in Use:**
- Post-frame callback pattern for state updates (avoid setState during build)
- SafeArea usage for mobile platforms
- Error boundary wrapping for crash protection
- Platform checks using `kIsWeb` and `Platform.isXXX`
- Window management for desktop platforms

**File Structure:**
```
lib/
├── components/      # Reusable UI components
├── config/          # Configuration files
├── constants/       # Layout and app constants
├── dialogs/         # Dialog widgets
├── logic/           # Business logic handlers
├── managers/        # State and game managers
├── models/          # Data models
├── providers/       # Provider state management
├── screens/         # Screen layouts (narrow/wide)
├── services/        # API and external services
├── styles/          # App styling
├── utils/           # Utility functions
└── main.dart        # App entry point
```

**Naming Convention:**
camel case for object names, i.e: userManager.dart

**Debug Flags (in main.dart):**
- `debugShowBorders` - Show layout borders
- `debugForceIsWeb` - Force web mode
- `debugForceIsNarrow` - Force narrow layout
- `disableSpellCheck` - Disable spell checking
- `debugForceExpiredBoard` - Force expired board state
- `debugForceValidBoard` - Force valid board state
- `debugClearPrefs` - Clear preferences for new user testing
- `debugForceIntroAnimation` - Force intro animation
- `debugDisableSecretReset` - Disable secret title reset

**Copyright Header (required for all source files):**
```dart
// Copyright © 2026 Digital Relics. All Rights Reserved.
```
